@model List<Tuan06.Models.CartItem>
@{
    var total = (decimal)(ViewBag.Total ?? 0m);
}
<h2>Giỏ hàng</h2>
@if (Model.Count == 0)
{
    <p>Chưa có sản phẩm nào trong giỏ.</p>
}
else
{
    <table class="table">
        <thead><tr><th>SP</th><th>Giá</th><th>SL</th><th>Thành tiền</th><th></th></tr></thead>
        <tbody>
            @foreach (var x in Model)
            {
                <tr>
                    <td>
                        <img src="/@x.HinhAnh" style="width:60px;height:60px;object-fit:cover" />
                        @x.TenSP
                    </td>
                    <td>@(x.DonGiaKhuyenMai > 0 ? x.DonGiaKhuyenMai : x.DonGia).ToString("N0") đ</td>
                    <td>@x.Qty</td>
                    <td>@x.SubTotal.ToString() đ</td>
                    <td>
                        <form asp-action="Remove" method="post">
                            <input type="hidden" name="id" value="@x.MaSP" />
                            <button type="submit" class="btn btn-sm btn-danger">Xóa</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="text-end"><strong>Tổng:</strong></td>
                <td><strong>@total.ToString() đ</strong></td>
                <td></td>
            </tr>
        </tfoot>
    </table>
    <a asp-controller="Product" asp-action="Index" class="btn btn-secondary">Tiếp tục mua</a>
}
